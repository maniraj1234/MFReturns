<!DOCTYPE html>
<html lang="en">
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
<body>
  <script src="AppService.js"></script>  
  <script src="DataService.js"></script>
  <script src="DataModel.js"></script>
  <script src="Formatter.js"></script>

<h2>MF Returns Dashboard</h2>
  <label>Folio number: </label><input type="number" id="folioID" value="102885" required></input>
  <label>From date: </label><input type="date" id="startDate" required></input>
  <label>To date: </label><input type="date" id="endDate" required></input>
  <button type="button" onclick="onClickCalculateReturns()">Calculate Returns</button>
<script>
  var appService = new AppService();
  onClickCalculateReturns = function()
  {
    var MFData;
    var horizon = 1;
    var period = 3;
    var mfId = document.getElementById('folioID').value;
    dateStart = new Date(document.getElementById('startDate').value);
    dateEnd = new Date(document.getElementById('endDate').value);
    appService.getJSON('https://api.mfapi.in/mf/'+mfId, onMFDataLoaded);
  }
  onMFDataLoaded = function(err, data) {
      if (err !== null) {
        alert('Something went wrong: ' + err);
      } else {
        //console.log(JSON.stringify(data));
        console.log(appService.getReturns(1000,2500,7));
        MFData = appService.getMFDataMap(data.data);

      }
  }
</script>
<!-- <script>
var app = angular.module('MFReturns', []);
app.controller('formCtrl', function($scope) {
    $scope.schemeID = "SchemeId";
});
</script> -->

</body>
</html>
